---
title: Machine Learning Studio (класични) експерименти
description: Користите моделе Machine Learning Studio (класични) у услузи Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 2eb44604e72b32292f971754d4f8c4fd1988c697
ms.sourcegitcommit: dab2cbf818fafc9436e685376df94c5e44e4b144
ms.translationtype: HT
ms.contentlocale: sr-Cyrl-RS
ms.lasthandoff: 07/13/2021
ms.locfileid: "6555187"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a>Користите моделе који се заснивају на услузи Azure Machine Learning Studio (класични)

Обједињени подаци у услузи Dynamics 365 Customer Insights јесу извор за изградњу модела машинског учења који могу створити додатне пословне увиде. Customer Insights се интегрише са Machine Learning Studio (класични) да би користио ваше прилагођене моделе. Да бисте видели како се модели развијени у Azure машинском учењу интегришу са услугом Customer Insights, погледајте [Експерименти у Azure машинском учењу](azure-machine-learning-experiments.md).

## <a name="prerequisites"></a>Предуслови

- Приступ у Customer Insights
- Активна Azure Enterprise претплата
- [Обједињени профил клијента](data-unification.md)
- Подешавање [извоза ентитета у Azure складиште блоб објеката](export-azure-blob-storage.md)

## <a name="set-up-machine-learning-studio-classic"></a>Подесите Machine Learning Studio Classic

У првом кораку треба да креирамо радни простор и отворимо Machine Learning Studio (класични).

1. Идите на адресу[https://www.portal.azure.com](https://www.portal.azure.com/) и пријавите се.

1. Изаберите **Креирај ресурс**.

1. Претражите **Радни простор студија за машинско учење** и изаберите **Креирај**.

1. Унесите потребне детаље у [креирање радног простора](/azure/machine-learning/studio/create-workspace). Изаберите **Ниво цена планова веб-услуга** на основу количине података коју планирате да увезете. За најбоље перформансе, изаберите **локацију** која вам је географски најближа.

1. Након креирања ресурса, приказаће се контролна табла радног простора студија за машинско учење. Изаберите **Покрените студио за машинско учење**.

   ![Кориснички интерфејс Azure студија за машинско учење.](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a>Рад са Azure студиом за машинско учење

Сада можете да креирате нови експеримент или увезете постојећи предложак експеримента из галерије узорака. Постоје узорци експеримената за три стандардна сценарија:

- [Предвиђање одлива](#churn-analysis)

- [Трајна вредност клијента](#customer-lifetime-value-prediction)

- [Препорука за производе или следећа најбоља радња](#productrecommendation-or-next-best-action)

1. Ако креирате нови експеримент или употребљавате предложак експеримента из галерије, морате да конфигуришете својства за **Увоз података**. Користите вођено искуство или директно наведите детаље за приступ Azure складишту блоб објеката које садржи ваше податке.  

   ![Експеримент са Azure студиом за машинско учење.](media/azure-machine-learning-studio-experiment.png)

1. Сада можете изградити прилагођени канал за обраду да бисте обрисали и претходно обрадили податке, издвојили функције и обучили одговарајући модел.

1. Тестирајте и оптимизујте перформансе модела.

1. Када будете задовољни квалитетом модела, изаберите **Подесите веб-услугу** > **Веб-услуга предвиђања**. Ова опција увози обучени модел и карактеристику канала од експеримента обуке до услуге предвиђања. Услуга предвиђања може узети други скуп улазних података са шемом која се користи у експерименту обуке да би се направила предвиђања.

   ![Постављање веб-услуге предвиђања.](media/predictive-webservice-control.png)

1. Када експеримент веб-услуге предвиђања буде успешан, можете га применити за аутоматско заказивање. Да би веб-услуга радила са услугом Customer Insights, изаберите **Примени веб-услугу** > **Преглед примене веб-услуге [Ново]**. [Сазнајте више о примени веб-услуге](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).

   ![Примена веб-услуге предвиђања.](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a>Модели узорака из галерије

Користићемо фиктивни сценарио Contoso хотела за моделе у овом чланку. Contoso хотел прикупља следеће податке:

- CRM подаци који се састоје од активности боравка у хотелу. Скуп података садржи информације о датумима боравка за сваког регистрованог клијента. Такође садржи информације о резервацији, типовима соба, детаљима потрошње итд. Подаци се протежу кроз четири године, од јануара 2014. до јануара 2018. године.
- Клијентски профили гостију хотела. Ови профили садрже податке о сваком клијенту, укључујући њихово име, датум рођења, поштанску адресу, пол и број телефона.
- Употреба услуга које нуди хотел, као што су базен, перионица, WiFi или курирска служба. Ове информације се бележе за сваког регистрованог клијента. Употреба услуга је обично повезана са боравком. У неким случајевима, услуге могу користити клијенти без боравка у хотелу.

## <a name="churn-analysis"></a>Анализа одлива

Анализа одлива се односи на различите области пословања. У овом примеру, осврнућемо се на одлив услуга, посебно у контексту хотелских услуга као што је горе описано. Омогућава радни пример канала целовитог модела који се може користити као почетна тачка за било који други модел одлива.

### <a name="definition-of-churn"></a>Дефиниција одлива

Дефиниција одлива може се разликовати на основу сценарија. У овом примеру, гост који није посетио хотел у последњих годину дана требало би да буде означен као одлив.  

Предложак експеримента се може увести из галерије. Прво обезбедите да увезете податке за **Активност боравка у хотелу**, **Подаци о клијенту** и **Подаци о употреби услуге** из складишта Azure складишта блоб објекта.

   ![Увоз података за модел губитка клијената.](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a>Карактеризација

На основу дефиниције губитка, прво идентификујемо необрађене функције које ће утицати на ознаку. Затим обрађујемо ове сирове функције у нумеричке функције које се могу користити са моделима машинског учења. Интеграција података се дешава у услузи Customer Insights тако да можемо придружити ове табеле помоћу *ID-а клијента*.

   ![Придружите увезене податке.](media/join-imported-data.png)

Карактеризација за израду модела за анализу одлива може бити помало проблематична. Подаци су функција времена са свакодневним новим активностима хотела. Током карактеризације желимо да из динамичких података створимо статичке функције. У овом случају генеришемо више функција из хотелских активности са клизним временским оквиром од једне године. Такође проширујемо функције категоризације попут врсте собе или врсте резервације у посебне функције користећи категоризовано кодирање.  

Коначни списак функција:

| **Број**  | **Original_Column**          | **Изведене функције**                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| 1           | Врста собе                    | RoomTypeLargeCount, RoomTypeSmallCount                                                                                                    |
| 2           | Тип резервације                 | BookingTypeOnlineCount, BookingTypePhoneCallCount                                                                                         |
| 3           | Категорија путовања              | TravelCategoryBusinessCount, TravelCategoryLeisureCount                                                                                   |
| 4           | Потрошен новац                | TotalDollarSpent                                                                                                                          |
| 5           | Датуми пријављивања и одјављивања  | StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016. StayCount2015, StayCount2014                |
| 6           | Коришћење услуга                | UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage  |

### <a name="model-selection"></a>Избор модела

Сада треба да одаберемо оптималан алгоритам који ћемо користити. У овом случају, већина функција се заснива на категоричким функцијама. Модели засновани на стаблу одлука обично добро раде. Ако постоје само нумеричке функције, неуронске мреже би могле бити бољи избор. Векторска машина за подршку (SVM) такође је добар кандидат у таквим ситуацијама; међутим, за извлачење најбољих перформанси потребно је прилично подешавање. Ми бирамо **Стабло одлучивања појачано са две класе** као први модел избора који је праћен са **SVM у две класе** као други модел. Azure студио за машинско учење дозвољава вам да обавите А/Б тестирање, тако да је корисно почети са два модела, а не са једним.

Следећа слика приказује канал обуке и оцењивања модела из Azure студија за машинско учење:

![Модел губитка клијената у услузи Azure Machine Learning Studio.](media/azure-machine-learning-model.png)

Такође примењујемо и технику под називом **Значај функције пермутације**, важан аспект оптимизације модела. Уграђени модели имају мало или нимало увида у утицај било које посебне функције на коначно предвиђање. Калкулатор важности функције користи прилагођени алгоритам за израчунавање утицаја појединих карактеристика на исход одређеног модела. Значај функције је нормализован између +1 и -1. Негативан утицај значи да одговарајућа карактеристика има контраинтуитивни утицај на исход и да је треба уклонити из модела. Позитиван утицај указује на то да функција значајно доприноси предвиђању. Ове вредности нису коефицијенти корелације, јер су то различити показатељи. За више информација погледајте [Значај функције пермутације](/azure/machine-learning/studio-module-reference/permutation-feature-importance).

Читав [експеримент одлива доступан је у Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).

## <a name="customer-lifetime-value-prediction"></a>Предвиђање вредности животног века клијента

Прорачун вредности животног века клијента (CLTV) један је од кључних показатеља које предузеће може користити за процену и сегментирање клијената. За хотелски посао, најважније је познавање клијената. На пример, разумевање фактора који чине добре клијенте представља кључну информацију. То помаже менаџменту хотела да процени на које функције треба да се фокусирају и побољшају их како би задовољили своје клијенте са високом платежном моћи. Ове одлуке могу имати директан утицај на продају и зараду.  

### <a name="definition-of-cltv"></a>Дефиниција вредности животног века клијента

За овај пример, вредност животног века клијента дефинишемо као укупни новчани износ који се очекује да ће клијент потрошити у наредних 365 дана. Користићемо податке у последње три године за све клијенте да предвидимо ову вредност.

### <a name="featurization"></a>Карактеризација

У овом случају, карактеризација ће бити представљена управо као сценарио одлива. Међутим, ознаке и предвиђене вредности се разликују од горе дефинисаних.

### <a name="model-selection"></a>Избор модела

Предвиђање вредности животног века клијента је регресиони проблем, јер је предвиђена вредност је континуирана променљива позитивне вредности. На основу својстава функције, бирамо **Појачана регресија стабла одлучивања** као један алгоритам и **Регресија неуронске мреже** као још један алгоритам за обуку модела.

## <a name="product-recommendation-or-next-best-action"></a>Препорука за производе или следећа најбоља радња

Препорука за производе у хотелском сценарију тумачи се као препорука услуга које хотел нуди клијентима. Циљ је одабрати одговарајуће услуге за клијенте тако да њихова употреба буде максимална. То је слично препорукама за филмове за кориснике услуга видео стримовања.

### <a name="definition-of-product-recommendation-or-next-best-action"></a>Дефиниција препоруке за производе или следећа најбоља радња

Циљ дефинишемо као максимизовање новчаног износа коришћења услуга уз понуду најбољих одговарајућих услуга клијентима хотела кориснике у складу са њиховим интересовањима.

### <a name="featurization"></a>Карактеризација

Попут модела одлива, повезујемо ServiceCustomerID за хотел са параметром CustomerID како бисмо изградили препоруке доследно по параметру CustomerID.

![Карактеризација модела препорука.](media/azure-machine-learning-model-featurization.png)

Подаци се добијају из три различита ентитета и од њих су изведене функције. Карактеристика за проблем препоруке различита је у поређењу са сценаријима одлива или вредности животног века клијента. Моделу препорука су потребни улазни подаци у облику три скупа функција.

### <a name="model-selection"></a>Избор модела

Предвиђамо производе или услуге користећи алгоритам који се зове **Train Matchbox Recommender** за обуку модела препорука.

![Алгоритам препорука за производе.](media/azure-machine-learning-model-recommendation-algorithm.png)

Три улаза за модел **Train Matchbox Recommender** садржи податке о коришћењу услуге обуке, опис клијента (опционално) и опис услуге. Постоје три различита начина бодовања модела. Један је за евалуацију модела где се за рангирање оцењених предмета израчунава Нормализовани дисконтни кумулативни добитак (NDCG). У овом експерименту имамо NDCG оцену 0,97. Друге две опције су оцењивање модела у целом препорученом каталогу услуга или само оцењивање предмета које корисници раније нису користили.

Гледајући даље на дистрибуцију препорука у читавом каталогу услуга, примећујемо да су телефон, WiFi и курирска служба најбоље услуге које се препоручују. То је у складу са оним што смо пронашли из дистрибуције података о потрошњи услуга:

![Излаз модела препоруке.](media/azure-machine-learning-model-output.png)

Целом [експерименту препоруке производа може се приступити у Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)

## <a name="integrate-custom-models"></a>Интеграција прилагођених модела

Да бисте користили та предвиђања у услузи Customer Insights, морате да **извезете** предвиђања заједно са ID-овима клијената. [Извезите их на исту локацију Azure складишта блоб објеката](/azure/storage/common/storage-import-export-data-from-blobs) на коју извозите изворне податке. Веб-услуга предвиђања може се редовно приказивати и ажурирати оцене.

Подаци које генерише прилагођени модел могу се користити за додатно обогаћивање података о клијентима. За више информација погледајте [Прилагођени модели машинског учења](custom-models.md).


[!INCLUDE[footer-include](../includes/footer-banner.md)]